define(["backbone","handlebars","jquery","views/ProductView","text!templates/productsListTemplate.html"],function(a,b,c,d,e){var f=a.View.extend({events:{},initialize:function(){this.listenTo(this.collection,"add",this.render),this.compiledTemplate=b.compile(e),this.collection.fetch()},showWhat:function(){console.log(arguments[0],arguments)},render:function(){this.$el.html(this.compiledTemplate({}));var a=this.$("table");return this.collection.each(function(b){var c=new d({model:b});a.append(c.render().$el)}),this.$("#spanTotal").text(this.collection.length),this.$("#spanDiscontinued").text(this.collection.filter(function(a){return a.get("isDiscontinued")}).length),this},showDiscontinued:function(){this.collection.each(function(a){a.trigger("visibility","discontinued")})},showAll:function(){this.collection.each(function(a){a.trigger("visibility","all")})},showActive:function(){this.collection.each(function(a){a.trigger("visibility","active")})}});return f});